parameters:
    locale: 'en'
    mailer_host_email: '%env(MAILER_HOST_EMAIL)%'
    mailer_admin_email: '%env(MAILER_ADMIN_EMAIL)%'
    aws_key: '%env(AWS_S3_KEY)%'
    aws_secret: '%env(AWS_S3_SECRET)%'
    aws_s3_region: '%env(AWS_S3_REGION)%'
    redis_host: '%env(REDIS_CONNECTION)%'

services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: false

    App\:
        resource: '../src/*'
        exclude: '../src/{Entity,Migrations,Tests}'

    App\Controller\:
        resource: '../src/Controller'
        tags: ['controller.service_arguments']

    App\EventSubscriber\ApiExceptionSubscriber:
        arguments:
            $debug: '%kernel.debug%'
        tags:
            - { name: kernel.event_subscriber, event: kernel.exception}

    App\CustomPagerfanta\CustomView:
        tags: [{ name: pagerfanta.view, alias: custom_view }]

    Aws\S3\S3Client:
        factory: 'App\Service\CloudStorage\Factory\S3Factory:create'

    ########################
    # Binding the interfaces
    ########################
    App\Service\CloudStorage\Interfaces\CloudStorageInterface: '@App\Service\CloudStorage\S3'

    Psr\SimpleCache\CacheInterface:
        factory: 'App\Service\Cache\RedisFactory:create'

